<html>
  <head>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link
      rel="stylesheet"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.googleapis.com/css2?display=swap&family=Inter%3Awght%40400%3B500%3B700%3B900&family=Noto+Sans%3Awght%40400%3B500%3B700%3B900"
    />

    <title>SecureSharer - Share Secrets Securely & Anonymously</title>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />

    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  </head>
  <body>
    <div class="relative flex min-h-screen flex-col bg-[#101a23] dark group/design-root overflow-x-hidden" style='font-family: Inter, "Noto Sans", sans-serif;'>
      <div class="layout-container flex min-h-screen flex-col">
        <header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#223649] px-4 sm:px-10 py-3">
          <div class="flex items-center gap-4 text-white">
            <img src="logo.png" alt="SecureSharer Logo" class="h-8 w-auto">
            <h2 class="text-white text-lg font-bold leading-tight tracking-[-0.015em]">SecureSharer</h2>
          </div>
          <div class="flex flex-1 justify-end items-center gap-6 sm:gap-8">
            <div class="flex items-center gap-4 sm:gap-6 md:gap-9">
              <a class="text-[#c1d2e3] hover:text-white text-sm font-medium leading-normal transition-colors" href="#how-it-works">How It Works</a>
              <a class="text-[#c1d2e3] hover:text-white text-sm font-medium leading-normal transition-colors" href="#why-use">Why Us?</a>
              <a class="text-[#c1d2e3] hover:text-white text-sm font-medium leading-normal transition-colors" href="#mySecretsHeading">My Secrets</a>
            </div>
            <div
              class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10 cursor-pointer border-2 border-transparent hover:border-[#0b80ee] transition-all"
              style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuDU-j0wNyUKuIvcmTMleDvWmlVk_RErBSesvnYVgcCCMv9spYcDLUFZFA37GOa6YERCEzl5awdwEeWs21DMtrGPF8uDYTv5J9CC-lsqMzeu00oNqrbELqmA74QAVOiTkBLEAZtsKBfmLyHz3mYzRBafeMsrIXJQgwa3g8C5NznSILXM_v0J8Bxq2fd1O1s6ETK1jl4LL0m876r46_Dekf42eO26CiE0H_ZG5SrBwhjrfI0XL_eZaZxZZEKwRhZRI2a3tVmhQsRYdyg");'
              title="Profile (Placeholder)"
            ></div>
          </div>
        </header>
        <main class="px-4 sm:px-10 md:px-20 lg:px-40 flex flex-1 justify-center py-5">
          <div class="layout-content-container flex flex-col max-w-[960px] flex-1">
            <div class="@container">
              <div class="@[480px]:p-4">
                <section
                  class="flex flex-col gap-6 bg-[#101a23] @[480px]:gap-8 @[480px]:rounded-xl items-center justify-center p-4 text-center"
                >
                  <div class="flex flex-col gap-2">
                    <h1
                      class="text-white text-4xl sm:text-5xl font-black leading-tight tracking-[-0.033em] @[480px]:text-5xl @[480px]:font-black @[480px]:leading-tight @[480px]:tracking-[-0.033em]"
                    >
                      Share Secrets Effortlessly & Securely.
                    </h1>
                    <h2 class="text-[#c1d2e3] text-sm sm:text-base font-normal leading-relaxed @[480px]:text-base @[480px]:font-normal @[480px]:leading-normal max-w-2xl mx-auto">
                      Create self-destructing notes for your sensitive information. Share passwords, confidential data, or private messages with peace of mind.
                    </h2>
                  </div>

                  <div id="createSection" class="my-12 md:my-16 lg:my-20 flex flex-col items-center px-4 sm:px-6 md:px-8 py-10 bg-[#182734] rounded-xl border-2 border-[#0b80ee] shadow-2xl w-full max-w-[700px] mx-auto">
                    <h3 class="text-white text-2xl md:text-3xl font-bold mb-3 text-center">Compose Your Secure Note</h3>
                    <p class="text-[#90aecb] text-sm md:text-base mb-6 text-center max-w-md">
                        Your message is encrypted and vanishes after one view. Generate a unique, one-time access link instantly.
                    </p>
                    <label class="flex flex-col min-w-40 h-16 md:h-20 w-full max-w-[600px]">
                      <div class="flex w-full flex-1 items-stretch rounded-xl h-full">
                        <div
                          class="text-[#90aecb] flex border-2 border-[#0b80ee] bg-[#101a23] items-center justify-center pl-4 md:pl-5 rounded-l-xl border-r-0"
                        >
                          <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256" class="opacity-75">
                            <path d="M227.31,73.37,182.63,28.69a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H92.69A15.86,15.86,0,0,0,104,219.31L227.31,96a16,16,0,0,0,0-22.63ZM92.69,208H48V163.31l88-88L180.69,120ZM192,108.69,147.31,64l24-24L216,84.69Z"></path>
                          </svg>
                        </div>
                        <input
                          id="secretMessageInput"
                          placeholder="Your secret message goes here..."
                          class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-none text-white focus:outline-none focus:ring-2 focus:ring-[#0b80ee] focus:border-[#0b80ee] border-y-2 border-r-0 border-l-0 border-[#0b80ee] bg-[#101a23] h-full placeholder:text-[#7992ab] px-4 md:px-5 text-base md:text-lg font-normal leading-normal"
                          value=""
                          autofocus
                        />
                        <div class="flex items-center justify-center rounded-r-xl border-l-0 border-y-2 border-r-2 border-[#0b80ee] bg-[#101a23] pr-2 md:pr-3">
                          <button
                            id="mainCreateLinkButton"
                            class="flex min-w-[100px] md:min-w-[120px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 md:h-14 px-5 md:px-6 bg-[#0b80ee] hover:bg-[#0056b3] text-white text-base md:text-lg font-bold leading-normal tracking-[0.015em] transition-colors duration-150 ease-in-out"
                          >
                            <span class="truncate">Create Link</span>
                          </button>
                        </div>
                      </div>
                    </label>
                    <div id="resultArea" class="hidden mt-6 p-4 bg-[#182734] border border-[#314d68] rounded-xl max-w-[600px] w-full">
                      <div class="flex flex-col gap-3">
                        <h3 class="text-white text-sm font-medium">Your secure link is ready:</h3>
                        <div class="flex items-center gap-2 bg-[#101a23] border border-[#314d68] rounded-lg p-3">
                          <input
                            id="secretLinkInput"
                            type="text"
                            readonly
                            class="flex-1 bg-transparent text-white text-sm border-none focus:outline-none select-all"
                            placeholder="Secret link will appear here..."
                          />
                          <button
                            id="copyLinkButton"
                            class="flex items-center justify-center w-8 h-8 bg-[#0b80ee] hover:bg-[#0969d3] rounded text-white transition-colors"
                            title="Copy to clipboard"
                          >
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256">
                              <path d="M216,32H88a8,8,0,0,0-8,8V80H40a8,8,0,0,0-8,8V216a8,8,0,0,0,8,8H168a8,8,0,0,0,8-8V176h40a8,8,0,0,0,8-8V40A8,8,0,0,0,216,32ZM160,208H48V96H80v72a8,8,0,0,0,8,8h72Zm48-48H96V48H208Z"></path>
                            </svg>
                          </button>
                        </div>
                        <p class="text-[#90aecb] text-xs">
                          <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" viewBox="0 0 256 256" class="inline mr-1 align-baseline">
                            <path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm16-40a8,8,0,0,1-8,8,16,16,0,0,1-16-16V128a8,8,0,0,1,0-16,16,16,0,0,1,16,16v40A8,8,0,0,1,144,176ZM112,84a12,12,0,1,1,12,12A12,12,0,0,1,112,84Z"></path>
                          </svg>
                          This link self-destructs after its first use. Share wisely.
                        </p>
                      </div>
                    </div>
                  </div>
                </section>
              </div>
            </div>

            <section id="why-use" class="mt-16 md:mt-20 text-white text-center w-full px-4 py-8">
              <h2 class="text-3xl md:text-4xl font-bold mb-4">The SecureSharer Advantage</h2>
              <p class="text-[#c1d2e3] text-base md:text-lg mt-2 mb-10 max-w-2xl mx-auto leading-relaxed">Experience unparalleled security and simplicity. We prioritize your privacy with cutting-edge features designed for modern data sharing needs.</p>
              <div class="grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8">
                <div class="flex flex-col items-center gap-4 rounded-xl border border-[#223649] bg-[#182734] p-6 text-center hover:border-[#0b80ee] hover:shadow-xl transition-all duration-300">
                  <div class="p-3 rounded-full bg-[#0b80ee] text-white inline-block">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" viewBox="0 0 256 256"><path d="M208,80H176V56a48,48,0,0,0-96,0V80H48A16,16,0,0,0,32,96V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V96A16,16,0,0,0,208,80Zm-80,24a12,12,0,1,1,12,12A12,12,0,0,1,128,104Zm0,56a12,12,0,1,1,12,12A12,12,0,0,1,128,160ZM160,80H96V56a32,32,0,0,1,64,0Z"></path></svg>
                  </div>
                  <h3 class="text-white font-semibold text-xl mt-2">Fortress-Grade Encryption</h3>
                  <p class="text-[#90aecb] text-sm leading-relaxed">Your data is locked down from creation to viewing with robust end-to-end encryption. Only the intended recipient can access it.</p>
                </div>
                <div class="flex flex-col items-center gap-4 rounded-xl border border-[#223649] bg-[#182734] p-6 text-center hover:border-[#0b80ee] hover:shadow-xl transition-all duration-300">
                  <div class="p-3 rounded-full bg-[#0b80ee] text-white inline-block">
                     <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" viewBox="0 0 256 256"><path d="M216,48H176V40a24,24,0,0,0-24-24H104A24,24,0,0,0,80,40v8H40a8,8,0,0,0,0,16h8V208a16,16,0,0,0,16,16H192a16,16,0,0,0,16-16V64h8a8,8,0,0,0,0-16ZM96,40a8,8,0,0,1,8-8h48a8,8,0,0,1,8,8v8H96Zm48,128H112a8,8,0,0,1,0-16h32a8,8,0,0,1,0,16Zm0-32H112a8,8,0,0,1,0-16h32a8,8,0,0,1,0,16Z"></path></svg>
                  </div>
                  <h3 class="text-white font-semibold text-xl mt-2">Instant Self-Destruction</h3>
                  <p class="text-[#90aecb] text-sm leading-relaxed">Secrets vanish automatically after a single view. No traces left behind, ensuring maximum confidentiality.</p>
                </div>
                <div class="flex flex-col items-center gap-4 rounded-xl border border-[#223649] bg-[#182734] p-6 text-center hover:border-[#0b80ee] hover:shadow-xl transition-all duration-300">
                  <div class="p-3 rounded-full bg-[#0b80ee] text-white inline-block">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" viewBox="0 0 256 256"><path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm36.43,145.18a8,8,0,1,1-10.86,11.64l-25.57-24-25.57,24a8,8,0,1,1-10.86-11.64L116,138.88l-24-25.57a8,8,0,0,1,11.64-10.86l24,25.57,24-25.57a8,8,0,1,1,11.64,10.86L140.05,138.88Z"></path></svg>
                  </div>
                  <h3 class="text-white font-semibold text-xl mt-2">One-Time Access Links</h3>
                  <p class="text-[#90aecb] text-sm leading-relaxed">Each secret generates a unique link that works only once. Share with precision and control.</p>
                </div>
              </div>
            </section>

            <section id="how-it-works" class="mt-16 md:mt-20 text-white text-center w-full px-4 py-8">
              <h2 class="text-3xl md:text-4xl font-bold mb-4">Simple Steps to Secure Sharing</h2>
              <p class="text-[#c1d2e3] text-base md:text-lg mt-2 mb-10 max-w-2xl mx-auto leading-relaxed">Follow our straightforward process to protect your confidential information effortlessly. Sharing securely has never been easier.</p>
              <div class="grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8">
                <div class="flex flex-col items-center gap-4 rounded-xl border border-[#223649] bg-[#182734] p-6 text-center hover:border-[#0b80ee] hover:shadow-xl transition-all duration-300">
                  <div class="p-3 rounded-full bg-[#0b80ee] text-white inline-block">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" viewBox="0 0 256 256"><path d="M227.31,73.37,182.63,28.69a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H92.69A15.86,15.86,0,0,0,104,219.31L227.31,96a16,16,0,0,0,0-22.63ZM92.69,208H48V163.31l88-88L180.69,120Z"></path></svg>
                  </div>
                  <h3 class="text-white font-semibold text-xl mt-2">1. Compose Your Note</h3>
                  <p class="text-[#90aecb] text-sm leading-relaxed">Type your confidential message into our secure editor. Add any details you need to share.</p>
                </div>
                <div class="flex flex-col items-center gap-4 rounded-xl border border-[#223649] bg-[#182734] p-6 text-center hover:border-[#0b80ee] hover:shadow-xl transition-all duration-300">
                  <div class="p-3 rounded-full bg-[#0b80ee] text-white inline-block">
                     <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" viewBox="0 0 256 256"><path d="M237.66,106.34l-80-80A8,8,0,0,0,144,32V72.35c-23.46,4.08-54,16.58-77.82,36C42.8,129.42,24,159.41,24,192a8,8,0,0,0,16,0c0-22.42,13.59-45.92,33.53-63.15C92.13,111,118.28,100.36,144,96.45V136a8,8,0,0,0,13.66,5.66l80-80A8,8,0,0,0,237.66,106.34Z"></path></svg>
                  </div>
                  <h3 class="text-white font-semibold text-xl mt-2">2. Generate Secure Link</h3>
                  <p class="text-[#90aecb] text-sm leading-relaxed">With one click, encrypt your note and generate a unique, single-use shareable link.</p>
                </div>
                <div class="flex flex-col items-center gap-4 rounded-xl border border-[#223649] bg-[#182734] p-6 text-center hover:border-[#0b80ee] hover:shadow-xl transition-all duration-300">
                   <div class="p-3 rounded-full bg-[#0b80ee] text-white inline-block">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" viewBox="0 0 256 256"><path d="M247.31,124.76c-.35-.79-8.82-19.58-27.65-38.41C194.57,61.26,162.88,48,128,48S61.43,61.26,36.34,86.35C17.51,105.18,9,124,8.69,124.76a8,8,0,0,0,0,6.5c.35.79,8.82,19.57,27.65,38.4C61.43,194.74,93.12,208,128,208s66.57-13.26,91.66-38.34c18.83-18.83,27.3-37.61,27.65-38.4A8,8,0,0,0,247.31,124.76ZM128,192c-30.78,0-57.67-11.19-79.93-33.25A133.47,133.47,0,0,1,25,128a133.33,133.33,0,0,1,48.07-97.25C70.33,75.19,97.22,64,128,64s57.67,11.19,79.93,33.25A133.46,133.46,0,0,1,231.05,128C223.84,141.46,192.43,192,128,192Zm0-112a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Z"></path></svg>
                  </div>
                  <h3 class="text-white font-semibold text-xl mt-2">3. Share & Vanish</h3>
                  <p class="text-[#90aecb] text-sm leading-relaxed">Send the link. Once viewed, the note is permanently erased, leaving no digital footprint.</p>
                </div>
              </div>
            </section>

            <h2 id="mySecretsHeading" class="text-white text-2xl sm:text-[22px] font-bold leading-tight tracking-[-0.015em] px-4 pb-3 pt-10 md:pt-16 text-center sm:text-left">My Shared Secrets</h2>

            <section id="historySection" class="hidden px-4 py-6">
              <div id="linksHistory" class="flex flex-col gap-3">
              </div>
            </section>

            <section id="noSecretsSection" class="flex flex-col px-4 py-6">
              <div class="flex flex-col items-center gap-6 bg-[#182734] p-6 sm:p-8 rounded-xl border border-[#223649]">
                <div
                  class="bg-center bg-no-repeat aspect-video bg-cover rounded-xl w-full max-w-[320px] sm:max-w-[360px]"
                  style='background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%22360%22%20height%3D%22202%22%20viewBox%3D%220%200%20360%20202%22%20fill%3D%22none%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Crect%20width%3D%22360%22%20height%3D%22202%22%20rx%3D%2212%22%20fill%3D%22%23101a23%22/%3E%3Cpath%20d%3D%22M120%20121L146.5%2094.5L173%20121L200%2081L240%20121%22%20stroke%3D%22%23223649%22%20stroke-width%3D%223%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20opacity%3D%220.5%22/%3E%3Ccircle%20cx%3D%22140%22%20cy%3D%2281%22%20r%3D%2210%22%20stroke%3D%22%23223649%22%20stroke-width%3D%223%22%20opacity%3D%220.5%22/%3E%3Crect%20x%3D%220.5%22%20y%3D%220.5%22%20width%3D%22359%22%20height%3D%22201%22%20rx%3D%2211.5%22%20stroke%3D%22%23223649%22%20stroke-opacity%3D%220.7%22/%3E%3C/svg%3E");'
                ></div>
                <div class="flex max-w-[480px] flex-col items-center gap-2">
                  <p class="text-white text-lg font-bold leading-tight tracking-[-0.015em] max-w-[480px] text-center">Your Secrets Vault is Empty</p>
                  <p class="text-[#c1d2e3] text-sm font-normal leading-normal max-w-[480px] text-center">Ready to share securely? Create your first self-destructing note now.</p>
                </div>
                <button
                  id="noSecretsCreateButton"
                  class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 px-4 bg-[#0b80ee] hover:bg-[#0056b3] text-white text-sm font-bold leading-normal tracking-[0.015em] transition-colors"
                >
                  <span class="truncate">Create a Secure Note</span>
                </button>
              </div>
            </section>
          </div>
        </main>

        <footer class="flex flex-col gap-6 px-5 py-10 text-center bg-[#0c141c] border-t border-[#223649] mt-auto">
          <div class="flex flex-wrap items-center justify-center gap-x-6 gap-y-3">
            <a class="text-[#90aecb] text-sm font-normal leading-normal hover:text-white transition-colors" href="#">Privacy Policy</a>
            <a class="text-[#90aecb] text-sm font-normal leading-normal hover:text-white transition-colors" href="#">Terms of Service</a>
            <a class="text-[#90aecb] text-sm font-normal leading-normal hover:text-white transition-colors" href="#">Contact Us</a>
          </div>
          <div class="flex flex-wrap justify-center gap-5">
                <a href="#" aria-label="Twitter">
                  <div class="text-[#90aecb] hover:text-white transition-colors" data-icon="TwitterLogo" data-size="24px" data-weight="regular">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                      <path
                        d="M247.39,68.94A8,8,0,0,0,240,64H209.57A48.66,48.66,0,0,0,168.1,40a46.91,46.91,0,0,0-33.75,13.7A47.9,47.9,0,0,0,120,88v6.09C79.74,83.47,46.81,50.72,46.46,50.37a8,8,0,0,0-13.65,4.92c-4.31,47.79,9.57,79.77,22,98.18a110.93,110.93,0,0,0,21.88,24.2c-15.23,17.53-39.21,26.74-39.47,26.84a8,8,0,0,0-3.85,11.93c.75,1.12,3.75,5.05,11.08,8.72C53.51,229.7,65.48,232,80,232c70.67,0,129.72-54.42,135.75-124.44l29.91-29.9A8,8,0,0,0,247.39,68.94Zm-45,29.41a8,8,0,0,0-2.32,5.14C196,166.58,143.28,216,80,216c-10.56,0-18-1.4-23.22-3.08,11.51-6.25,27.56-17,37.88-32.48A8,8,0,0,0,92,169.08c-.47-.27-43.91-26.34-44-96,16,13,45.25,33.17,78.67,38.79A8,8,0,0,0,136,104V88a32,32,0,0,1,9.6-22.92A30.94,30.94,0,0,1,167.9,56c12.66.16,24.49,7.88,29.44,19.21A8,8,0,0,0,204.67,80h16Z"
                      ></path>
                    </svg>
                  </div>
                </a>
                <a href="#" aria-label="Facebook">
                  <div class="text-[#90aecb] hover:text-white transition-colors" data-icon="FacebookLogo" data-size="24px" data-weight="regular">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                      <path
                        d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm8,191.63V152h24a8,8,0,0,0,0-16H136V112a16,16,0,0,1,16-16h16a8,8,0,0,0,0-16H152a32,32,0,0,0-32,32v24H96a8,8,0,0,0,0,16h24v63.63a88,88,0,1,1,16,0Z"
                      ></path>
                    </svg>
                  </div>
                </a>
                <a href="#" aria-label="Instagram">
                  <div class="text-[#90aecb] hover:text-white transition-colors" data-icon="InstagramLogo" data-size="24px" data-weight="regular">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                      <path
                        d="M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160ZM176,24H80A56.06,56.06,0,0,0,24,80v96a56.06,56.06,0,0,0,56,56h96a56.06,56.06,0,0,0,56-56V80A56.06,56.06,0,0,0,176,24Zm40,152a40,40,0,0,1-40,40H80a40,40,0,0,1-40-40V80A40,40,0,0,1,80,40h96a40,40,0,0,1,40,40ZM192,76a12,12,0,1,1-12-12A12,12,0,0,1,192,76Z"
                      ></path>
                    </svg>
                  </div>
                </a>
              </div>
              <p class="text-[#7992ab] text-sm font-normal leading-normal">© 2024 SecureSharer. All rights reserved. Built for privacy.</p>
        </footer>
      </div>
    </div>

    <button
      id="floatingCreateButton"
      class="fixed bottom-6 right-6 bg-[#0b80ee] hover:bg-[#0056b3] text-white rounded-xl px-4 py-3 shadow-lg transition-all duration-300 ease-in-out z-50 hidden items-center space-x-2 text-sm font-medium"
      title="Create New Secret"
    >
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 256 256" class="flex-shrink-0">
        <path d="M227.31,73.37,182.63,28.69a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H92.69A15.86,15.86,0,0,0,104,219.31L227.31,96a16,16,0,0,0,0-22.63ZM92.69,208H48V163.31l88-88L180.69,120ZM192,108.69,147.31,64l24-24L216,84.69Z"></path>
      </svg>
      <span class="whitespace-nowrap">Create your secret!</span>
    </button>
  </body>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const secretInput = document.getElementById('secretMessageInput');
    const mainCreateLinkButton = document.getElementById('mainCreateLinkButton');
    const resultArea = document.getElementById('resultArea');
    const secretLinkInput = document.getElementById('secretLinkInput');
    const copyLinkButton = document.getElementById('copyLinkButton');
    const historySection = document.getElementById('historySection');
    const noSecretsSection = document.getElementById('noSecretsSection');
    const linksHistory = document.getElementById('linksHistory');
    const floatingButton = document.getElementById('floatingCreateButton');
    const createSectionToObserve = document.getElementById('createSection');
    const noSecretsCreateButton = document.getElementById('noSecretsCreateButton');


    let generatedLinks = [];
    try {
      const savedLinks = localStorage.getItem('secretSharerLinks');
      if (savedLinks) {
        generatedLinks = JSON.parse(savedLinks);
      }
    } catch (error) {
      console.error('Failed to load history from localStorage:', error);
    }
    updateHistoryUI();

    const isDevelopment = window.location.hostname === 'localhost' ||
                         window.location.hostname === '127.0.0.1' ||
                         window.location.protocol === 'file:';
    const shareApiEndpoint = isDevelopment ? 'http://127.0.0.1:5000/share' : '/api/share';
    const revealLinkBasePath = `${window.location.origin}/view.html#`;

    async function createSecret(buttonTrigger) {
      const secretText = secretInput.value;
      if (!secretText.trim()) {
        secretInput.focus();
        return;
      }

      const originalButtonText = buttonTrigger.innerHTML;
      buttonTrigger.innerHTML = '<span class="truncate">Encrypting & Creating Link...</span>';
      buttonTrigger.disabled = true;

      try {
        const response = await fetch(shareApiEndpoint, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ secret: secretText }),
        });
        let responseData;
        try {
          responseData = await response.json();
        } catch (jsonError) {
          const errorText = await response.text();
          throw new Error(`Server returned non-JSON response: ${response.status} - ${errorText || response.statusText}`);
        }
        if (response.ok && responseData.link_id) {
          const secretLink = `${revealLinkBasePath}${responseData.link_id}`;
          const newLinkData = { url: secretLink, timestamp: new Date().toISOString(), id: responseData.link_id };
          generatedLinks.unshift(newLinkData);
          if (generatedLinks.length > 10) generatedLinks = generatedLinks.slice(0, 10);
          localStorage.setItem('secretSharerLinks', JSON.stringify(generatedLinks));
          resultArea.classList.remove('hidden');
          secretLinkInput.value = secretLink;
          secretInput.value = ''; // Clear input after successful creation
          resultArea.scrollIntoView({ behavior: 'smooth', block: 'center' });
          updateHistoryUI(true); // Mark as new link for animation
        } else {
          const errorMessage = responseData.error || `Failed to share secret. Status: ${response.status}`;
          resultArea.classList.remove('hidden');
          secretLinkInput.value = `Error: ${errorMessage}`;
        }
      } catch (error) {
        resultArea.classList.remove('hidden');
        secretLinkInput.value = 'Error: Failed to create secret. Check console & backend.';
      } finally {
        buttonTrigger.innerHTML = originalButtonText; // Restore original button text
        buttonTrigger.disabled = false;
      }
    }

    async function copyToClipboard(textToCopy, buttonElement) {
        try {
            await navigator.clipboard.writeText(textToCopy);
            const originalIcon = buttonElement.innerHTML;
            const originalBg = buttonElement.style.backgroundColor || '';
            buttonElement.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256"><path d="M229.66,77.66l-128,128a8,8,0,0,1-11.32,0l-56-56a8,8,0,0,1,11.32-11.32L96,188.69,218.34,66.34a8,8,0,0,1,11.32,11.32Z"></path></svg>';
            buttonElement.style.backgroundColor = '#28a745'; // Success green
            setTimeout(() => {
                buttonElement.innerHTML = originalIcon;
                if (originalBg) buttonElement.style.backgroundColor = originalBg;
                else buttonElement.style.removeProperty('background-color');
            }, 2000);
        } catch (error) { console.error('Failed to copy to clipboard:', error); }
    }

    function truncateLink(url) {
      if (url.length <= 60) return url;
      try {
        const urlObj = new URL(url);
        const hashContent = urlObj.hash ? urlObj.hash.substring(1) : '';
        const idPart = hashContent ? `#${hashContent.substring(0, 8)}...${hashContent.substring(hashContent.length - 4)}` : '';
        return `${urlObj.protocol}//${urlObj.host}${(urlObj.pathname.length > 5 ? urlObj.pathname.substring(0,5)+'...' : urlObj.pathname)}${idPart}`;
      } catch (e) { return url.substring(0, 30) + "..." + url.substring(url.length - 20); }
    }

    function formatDate(dateString) {
      const date = new Date(dateString);
      const now = new Date();
      const diffMs = now - date;
      const diffSecs = Math.floor(diffMs / 1000);
      if (diffSecs < 60) return 'Just now';
      const diffMins = Math.floor(diffSecs / 60);
      if (diffMins < 60) return `${diffMins} min${diffMins === 1 ? '' : 's'} ago`;
      const diffHours = Math.floor(diffMins / 60);
      if (diffHours < 24) return `${diffHours} hr${diffHours === 1 ? '' : 's'} ago`;
      const diffDays = Math.floor(diffHours / 24);
      if (diffDays < 7) return `${diffDays} day${diffDays === 1 ? '' : 's'} ago`;
      return date.toLocaleDateString([], { day: 'numeric', month: 'short'}) + ' ' + date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
    }

    function updateHistoryUI(hasNewLink = false) {
      if (generatedLinks.length === 0) {
        historySection.classList.add('hidden');
        noSecretsSection.classList.remove('hidden');
        return;
      }
      historySection.classList.remove('hidden');
      noSecretsSection.classList.add('hidden');
      linksHistory.innerHTML = '';
      generatedLinks.forEach((linkData, index) => {
        const linkItem = document.createElement('div');
        linkItem.className = 'flex items-center justify-between p-3 bg-[#182734] border border-[#223649] rounded-lg mb-3 transition-all duration-300 hover:border-[#0b80ee]';
        if (index === 0 && hasNewLink) {
          linkItem.classList.add('ring-2', 'ring-[#0b80ee]', 'ring-opacity-75', 'transform', 'scale-105');
           setTimeout(() => linkItem.classList.remove('ring-2', 'ring-[#0b80ee]', 'ring-opacity-75', 'transform', 'scale-105'), 3000);
        }
        linkItem.innerHTML = `
          <div class="flex flex-col gap-1 flex-1 min-w-0">
            <span class="text-[#7992ab] text-xs font-medium">SHARED ${formatDate(linkData.timestamp).toUpperCase()}</span>
            <a href="${linkData.url}" target="_blank" class="text-[#c1d2e3] text-sm hover:text-[#0b80ee] transition-colors truncate block font-medium" title="${linkData.url}">
              <svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" fill="currentColor" viewBox="0 0 256 256" class="inline mr-1 align-middle text-[#0b80ee]"><path d="M136,136H40a8,8,0,0,1,0-16h96a8,8,0,0,1,0,16Zm0-48H40a8,8,0,0,1,0-16h96a8,8,0,0,1,0,16ZM40,184h64a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16Zm176-80v96a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V56A16,16,0,0,1,56,40h96a8,8,0,0,1,5.66,2.34l48,48A8,8,0,0,1,208,96v8a8,8,0,0,1-16,0V99.31l-42.34-42.34H56V200H200V104Z"></path></svg>
              ${truncateLink(linkData.url)}
            </a>
          </div>
          <button data-link="${linkData.url}" class="history-copy-button flex-shrink-0 flex items-center justify-center w-9 h-9 bg-[#223649] hover:bg-[#314d68] rounded-md text-white transition-colors ml-3 p-2" title="Copy link">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256"><path d="M216,32H88a8,8,0,0,0-8,8V80H40a8,8,0,0,0-8,8V216a8,8,0,0,0,8,8H168a8,8,0,0,0,8-8V176h40a8,8,0,0,0,8-8V40A8,8,0,0,0,216,32ZM160,208H48V96H80v72a8,8,0,0,0,8,8h72Zm48-48H96V48H208Z"></path></svg>
          </button>
        `;
        linksHistory.appendChild(linkItem);
      });
      document.querySelectorAll('.history-copy-button').forEach(btn => {
          btn.addEventListener('click', () => copyToClipboard(btn.dataset.link, btn));
      });
    }

    if (mainCreateLinkButton) {
        mainCreateLinkButton.addEventListener('click', async (e) => {
            e.preventDefault();
            await createSecret(mainCreateLinkButton);
        });
    }
    if (noSecretsCreateButton) {
        noSecretsCreateButton.addEventListener('click', (e) => {
            e.preventDefault();
            if(secretInput) secretInput.focus();
            if(createSectionToObserve) createSectionToObserve.scrollIntoView({ behavior: 'smooth', block: 'center' });
        });
    }
    if (copyLinkButton) copyLinkButton.addEventListener('click', () => copyToClipboard(secretLinkInput.value, copyLinkButton));
    if (secretInput) {
      secretInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          e.preventDefault();
          if (mainCreateLinkButton) mainCreateLinkButton.click();
        }
      });
    }

    if (floatingButton && createSectionToObserve) {
        const observer = new IntersectionObserver(entries => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    floatingButton.classList.add('hidden');
                } else {
                    floatingButton.classList.remove('hidden');
                }
            });
        }, { threshold: 0.1 });
        observer.observe(createSectionToObserve);
        floatingButton.addEventListener('click', () => {
            createSectionToObserve.scrollIntoView({ behavior: 'smooth', block: 'center' });
            setTimeout(() => { if (secretInput) secretInput.focus(); }, 500);
        });
    } else {
        if(floatingButton) floatingButton.classList.add('hidden');
    }
  });
</script>
</html>